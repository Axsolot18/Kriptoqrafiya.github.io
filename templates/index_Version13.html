<!DOCTYPE html>
<html lang="az">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kriptoqrafiyaya Yeni Başlayanlar üçün Veb Sayt</title>
  <!-- Font Awesome CDN for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <style>
    :root {
      --primary: #4f46e5;
      --primary-light: #6366f1;
      --bg: #f8fafb;
      --container-bg: #fff;
      --shadow: 0 4px 24px rgba(99, 102, 241, 0.08);
      --radius: 18px;
      --input-radius: 10px;
      --transition: 0.2s;
    }

    html {
      box-sizing: border-box;
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      background: linear-gradient(120deg, #e0e7ff 0%, var(--bg) 100%);
      min-height: 100vh;
      color: #222;
    }

    #splash-overlay {
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(120deg, var(--primary) 0%, #3b82f6 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      transition: none;
      cursor: pointer;
      user-select: none;
      touch-action: manipulation;
      will-change: transform, opacity;
    }

    #splash-overlay.animate {
      transition:
        transform 1.1s linear,
        opacity 1.1s linear;
      transform: translateX(-120vw);
      opacity: 0;
      pointer-events: none;
    }

    #splash-logo {
      font-size: 3em;
      margin-bottom: 18px;
      animation: splash-bounce 1.3s infinite alternate;
    }

    @keyframes splash-bounce {
      to {
        transform: translateY(-12px);
      }
    }

    #splash-title {
      font-size: 1.5em;
      font-weight: 600;
      letter-spacing: 1px;
      margin-bottom: 10px;
      text-shadow: 0 2px 12px rgba(59, 130, 246, 0.18);
      text-align: center;
    }

    #splash-desc {
      font-size: 1em;
      margin-bottom: 18px;
      text-align: center;
      max-width: 340px;
      opacity: .92;
      line-height: 1.5;
    }

    header {
      background: var(--primary-light);
      color: white;
      padding: 14px 0 10px 0;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.08);
      text-align: center;
      letter-spacing: 1px;
      font-size: 1.1em;
    }

    nav {
      background: #f3f4f6;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.07);
      display: flex;
      justify-content: center;
    }

    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 14px;
      flex-wrap: wrap;
    }

    nav ul li {
      display: inline;
    }

    nav a {
      color: var(--primary-light);
      font-weight: 500;
      text-decoration: none;
      padding: 10px 14px;
      border-radius: 8px;
      transition: background var(--transition), color var(--transition);
      display: flex;
      align-items: center;
      gap: 7px;
      font-size: 1em;
    }

    nav a:hover,
    nav a.active {
      background: var(--primary-light);
      color: white;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.13);
    }

    .container {
      max-width: 1200px;
      margin: 40px auto;
      background: var(--container-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 48px 38px 56px 38px;
      transition: box-shadow var(--transition);
    }

    .container h1,
    .container h2 {
      color: var(--primary-light);
      margin-bottom: 16px;
      font-size: 1.2em;
    }

    .section {
      display: none;
      animation: fadeIn 0.55s;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(15px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    ul {
      padding-left: 18px;
      margin-bottom: 16px;
      font-size: 1em;
    }

    ul li {
      margin-bottom: 7px;
      color: #374151;
      font-size: 1em;
    }

    .simulator-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 18px;
    }

    input[type="text"] {
      padding: 11px;
      border: 1px solid #c7d2fe;
      border-radius: var(--input-radius);
      font-size: 1em;
      transition: border .2s;
      outline: none;
    }

    input[type="text"]:focus {
      border-color: var(--primary-light);
      box-shadow: 0 0 0 1.5px #eef2ff;
    }

    button {
      background: var(--primary-light);
      color: #fff;
      border: none;
      border-radius: var(--input-radius);
      padding: 11px 0;
      margin-top: 3px;
      font-size: 1em;
      font-weight: 500;
      cursor: pointer;
      transition: background var(--transition);
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.08);
    }

    button:hover {
      background: #5759c5;
    }

    .result {
      background: #eef2ff;
      padding: 11px;
      border-radius: 10px;
      margin-top: 9px;
      color: #374151;
      font-size: 1em;
      word-break: break-all;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.07);
    }

    /* MOBILE OPTIMIZATION */
    @media (max-width: 520px) {
      .container {
        max-width: 99vw;
        margin: 10px 2vw;
        padding: 13px 7px 19px 7px;
        border-radius: 10px;
      }

      header {
        font-size: 1em;
        padding: 11px 0 8px 0;
      }

      nav a,
      nav ul {
        font-size: 0.98em;
        gap: 9px;
      }

      #splash-logo {
        font-size: 2em;
      }

      #splash-title {
        font-size: 1.13em;
      }

      #splash-desc {
        font-size: 0.98em;
        max-width: 92vw;
      }

      ul {
        font-size: 0.98em;
      }

      .container h1,
      .container h2 {
        font-size: 1.09em;
      }

      button,
      input[type="text"] {
        font-size: 0.97em;
        padding: 9px;
      }
    }

    @media (max-width: 400px) {
      .container {
        padding: 7px 2px 9px 2px;
      }

      nav a {
        font-size: 0.95em;
      }
    }
  </style>
</head>

<body>
  <!-- Splash (Giriş) Overlay -->
  <div id="splash-overlay">
    <div id="splash-logo"><i class="fa-solid fa-shield-halved"></i></div>
    <div id="splash-title">Kriptoqrafiyaya Giriş</div>
    <div id="splash-desc">
      Kriptoqrafiyaya yeni başlayanlar üçün<br>
      interaktiv və izahlı veb platforma.<br>
      <span style="opacity:.8; font-size:0.97em;">Başlamaq üçün buraya toxunun və ya klikləyin.</span>
    </div>
  </div>
  <!-- End Splash -->

  <header>
    <h1><i class="fa-solid fa-lock"></i> Kriptoqrafiyaya Təzə Başlayanlar üçün Veb Sayt</h1>
  </header>
  <nav>
    <ul>
      <li><a href="#" id="nav-home" class="active" onclick="showSection('home', this)"><i class="fa-solid fa-house"></i>
          Ana səhifə</a></li>
      <li><a href="#" id="nav-principles" onclick="showSection('principles', this)"><i
            class="fa-solid fa-book-open"></i> Əsas Prinsiplər</a></li>
      <li><a href="#" id="nav-simulator" onclick="showSection('simulator', this)"><i class="fa-solid fa-calculator"></i>
          Simulyator</a></li>
      <li id="google-signin-area" style="margin-left:auto;"></li>
    </ul>
    <!-- Google Sign-In SDK -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
  </nav>
  <div class="container">
    <div id="user-info"
      style="display:none; margin-bottom:18px; background:#eef2ff; border-radius:10px; padding:10px 18px; color:#374151; font-size:1.07em;">
    </div>
    <div id="home" class="section active">
      <h2>Kriptoqrafiyaya Giriş</h2>
      <p>
        <b>Saytın məqsədi:</b>
        Kriptoqrafiyaya yeni başlayanlar üçün interaktiv və izahlı platformadır.<br>
        Əsas prinsipləri, şifrələmə metodlarını və praktiki simulyatoru öyrənin.
      </p>
      <ul>
        <li><i class="fa-solid fa-check"></i> Teorik və praktiki biliklər</li>
        <li><i class="fa-solid fa-check"></i> Vizual və interaktiv öyrənmə</li>
        <li><i class="fa-solid fa-check"></i> AES şifrələmə simulyatoru</li>
      </ul>
    </div>

    <div id="principles" class="section">
      <h2>Kriptoqrafiyanın Əsas Prinsipləri</h2>
      <ul>
        <li><i class="fa-solid fa-key"></i> Məlumatın şifrələnməsi və deşifrələnməsi</li>
        <li><i class="fa-solid fa-user-lock"></i> Açıq və özəl açarların işləmə mexanizmi</li>
        <li><i class="fa-solid fa-random"></i> Simmetrik və asimmetrik şifrələmə</li>
        <li><i class="fa-solid fa-hashtag"></i> Hash funksiyaları</li>
        <li><i class="fa-solid fa-history"></i> Kriptoqrafiya tarixi və inkişafı</li>
      </ul>
    </div>

    <div id="simulator" class="section">
      <div style="display: flex; gap: 18px; align-items: flex-start;">
        <div
          style="flex: 1.5; min-width: 0; padding: 18px 18px 28px 18px; background: #fff; border-radius: 18px; box-shadow: 0 4px 24px rgba(99,102,241,0.08);">
          <h2 style="font-size:1.35em;"><i class="fa-solid fa-calculator"></i> AES ilə Mesaj Şifrələmə Simulyatoru</h2>
          <form class="simulator-form" onsubmit="return false;" style="gap:18px;">
            <input type="text" id="message" placeholder="Mesaj yazın" style="font-size:1.13em; padding:16px;" />
            <input type="text" id="key" placeholder="Açar yazın" style="font-size:1.13em; padding:16px;" />
            <button type="button" onclick="encrypt()" style="font-size:1.13em; padding:14px 0; margin-top:7px;"><i
                class="fa-solid fa-lock"></i> Şifrələ</button>
            <button type="button" onclick="decrypt()" style="font-size:1.13em; padding:14px 0; margin-top:7px;"><i
                class="fa-solid fa-unlock"></i> Deşifrələ</button>
          </form>
          <div id="encrypted" class="result" style="display:none; font-size:1.13em; padding:16px; margin-top:13px;">
          </div>
          <div id="decrypted" class="result" style="display:none; font-size:1.13em; padding:16px; margin-top:13px;">
          </div>
        </div>
        <div id="history-box"
          style="flex: 1; min-width: 0; background: #eef2ff; border-radius: 10px; box-shadow: 0 2px 8px rgba(99,102,241,0.07); padding: 13px; margin-top: 7px; max-height: 320px; overflow-y: auto;">
          <h3 style="color: #4f46e5; margin-top:0;">Əməliyyat Geçmişi</h3>
          <ul id="history-list" style="padding-left: 18px; font-size: 0.98em; margin-bottom:0;"></ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Google Sign-In
    function handleCredentialResponse(response) {
      const data = parseJwt(response.credential);
      document.getElementById('user-info').style.display = 'block';
      document.getElementById('user-info').innerHTML = `<b>Giriş edən:</b> ${data.name} &lt;${data.email}&gt;`;
    }
    function parseJwt(token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }
    window.onload = function () {
      google.accounts.id.initialize({
        client_id: '300463138865-lkg9shdvmqditukhq3opai7jfso6gv8k.apps.googleusercontent.com', // Buraya kendi client_id'nizi ekleyin
        callback: handleCredentialResponse
      });
      google.accounts.id.renderButton(
        document.getElementById('google-signin-area'),
        { theme: 'outline', size: 'large', text: 'signin_with' }
      );
    };
    // Splash giriş overlay logic
    function hideSplash() {
      var splash = document.getElementById('splash-overlay');
      splash.classList.add('animate');
      setTimeout(function () {
        splash.style.display = 'none';
      }, 1100); // animasiya bitəndə overlay tam yox olsun
    }
    // Desktop: mouse ilə klik
    document.getElementById('splash-overlay').addEventListener('mousedown', hideSplash);
    // Mobil: toxunma
    document.getElementById('splash-overlay').addEventListener('touchstart', hideSplash);

    // Section navigation
    function showSection(id, el) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      if (el) el.classList.add('active');
      // Clear simulator results on navigation
      if (id !== 'simulator') {
        document.getElementById('encrypted').style.display = 'none';
        document.getElementById('decrypted').style.display = 'none';
        document.getElementById('message').value = '';
        document.getElementById('key').value = '';
      }
    }
    // AES şifrələmə və deşifrələnmə + geçmiş
    let history = [];
    function updateHistoryBox() {
      const list = document.getElementById('history-list');
      list.innerHTML = '';
      if (history.length === 0) {
        list.innerHTML = '<li style="color:#888;">Hələ əməliyyat yoxdur.</li>';
        return;
      }
      history.slice(-2).forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `<b>${item.type === 'encrypt' ? 'Şifrələmə' : 'Deşifrələmə'}</b>: <span style="word-break:break-all;">${item.value}</span>`;
        list.insertBefore(li, list.firstChild);
      });
    }
    async function encrypt() {
      document.getElementById('decrypted').style.display = 'none';
      document.getElementById('decrypted').textContent = "";
      const message = document.getElementById('message').value;
      const key = document.getElementById('key').value;
      if (!message || !key) {
        document.getElementById('encrypted').textContent = "Mesaj və açar doldurulmalıdır!";
        document.getElementById('encrypted').style.display = 'block';
        return;
      }
      document.getElementById('encrypted').textContent = "Gözləyin...";
      document.getElementById('encrypted').style.display = 'block';
      try {
        const res = await fetch('/encrypt', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message, key })
        });
        const data = await res.json();
        if (data.error) {
          document.getElementById('encrypted').textContent = "Xəta: " + data.error;
        } else {
          // Son nəticəni üst hissədə göstər
          document.getElementById('encrypted').textContent = "Şifrələnmiş mesaj: " + data.encrypted;
          // Əməliyyat keçmişinə əlavə et
          history.push({ type: 'encrypt', value: data.encrypted });
          updateHistoryBox();
        }
      } catch (e) {
        document.getElementById('encrypted').textContent = "Serverə qoşulmaq mümkün olmadı!";
      }
    }
    async function decrypt() {
      const encryptedRaw = document.getElementById('encrypted').textContent;
      const encrypted = encryptedRaw.replace("Şifrələnmiş mesaj: ", "");
      const key = document.getElementById('key').value;
      if (!encrypted || !key || encryptedRaw === "Gözləyin..." || encryptedRaw === "Mesaj və açar doldurulmalıdır!") {
        document.getElementById('decrypted').textContent = "Əvvəl şifrələmə aparılmalıdır!";
        document.getElementById('decrypted').style.display = 'block';
        return;
      }
      document.getElementById('decrypted').textContent = "Gözləyin...";
      document.getElementById('decrypted').style.display = 'block';
      try {
        const res = await fetch('/decrypt', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ encrypted, key })
        });
        const data = await res.json();
        if (data.error) {
          document.getElementById('decrypted').textContent = "Xəta: " + data.error;
        } else {
          // Son nəticəni üst hissədə göstər
          document.getElementById('decrypted').textContent = "Deşifrələnmiş mesaj: " + data.decrypted;
          // Əməliyyat keçmişinə əlavə et
          history.push({ type: 'decrypt', value: data.decrypted });
          updateHistoryBox();
        }
      } catch (e) {
        document.getElementById('decrypted').textContent = "Serverə qoşulmaq mümkün olmadı!";
      }
    }
    // İlk açılışta geçmiş kutusunu güncelle
    updateHistoryBox();
  </script>
</body>
<script>
  async function encrypt() {
    document.getElementById('decrypted').style.display = 'none';
    document.getElementById('decrypted').textContent = "";
    const message = document.getElementById('message').value;
    const key = document.getElementById('key').value;
    if (!message || !key) {
      document.getElementById('encrypted').textContent = "Mesaj və açar doldurulmalıdır!";
      document.getElementById('encrypted').style.display = 'block';
      return;
    }
    document.getElementById('encrypted').textContent = "Gözləyin...";
    document.getElementById('encrypted').style.display = 'block';
    try {
      const res = await fetch('/encrypt', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message, key })
      });
      const data = await res.json();
      if (data.error) {
        document.getElementById('encrypted').textContent = "Xəta: " + data.error;
      } else {
        document.getElementById('encrypted').textContent = "Şifrələnmiş mesaj: " + data.encrypted;
        history.push({ type: 'encrypt', value: data.encrypted });
        updateHistoryBox();
      }
    } catch (e) {
      document.getElementById('encrypted').textContent = "Serverə qoşulmaq mümkün olmadı!";
    }
  }
  async function decrypt() {
    const encryptedRaw = document.getElementById('encrypted').textContent;
    const encrypted = encryptedRaw.replace("Şifrələnmiş mesaj: ", "");
    const key = document.getElementById('key').value;
    if (!encrypted || !key || encryptedRaw === "Gözləyin..." || encryptedRaw === "Mesaj və açar doldurulmalıdır!") {
      document.getElementById('decrypted').textContent = "Əvvəl şifrələmə aparılmalıdır!";
      document.getElementById('decrypted').style.display = 'block';
      return;
    }
    document.getElementById('decrypted').textContent = "Gözləyin...";
    document.getElementById('decrypted').style.display = 'block';
    try {
      const res = await fetch('/decrypt', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ encrypted, key })
      });
      const data = await res.json();
      if (data.error) {
        document.getElementById('decrypted').textContent = "Xəta: " + data.error;
      } else {
        document.getElementById('decrypted').textContent = "Deşifrələnmiş mesaj: " + data.decrypted;
        history.push({ type: 'decrypt', value: data.decrypted });
        updateHistoryBox();
      }
    } catch (e) {
      document.getElementById('decrypted').textContent = "Serverə qoşulmaq mümkün olmadı!";
    }
  }
  // ... digər kodlar ...
</script>

</html>
